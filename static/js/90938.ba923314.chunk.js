"use strict";(self.webpackChunkn2_land=self.webpackChunkn2_land||[]).push([[90938],{90938:(t,e,i)=>{i.r(e),i.d(e,{default:()=>z});var s=i(72791),n=i(36801),a=i(59181),o=i(97304),r=i(56343),h=i(66817),l=i(70565),u=i(54797),d=i(95494),c=i(44323),g=i(37919),p=i(47835),v=i(90740),_=i(66683),m=i(14628),f=i(83661),b=i(74753);class w extends g.W{constructor(){super(...arguments),Object.defineProperty(this,"lineX",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(v.r.new(this._root,{themeTags:["x"]}))}),Object.defineProperty(this,"lineY",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(v.r.new(this._root,{themeTags:["y"]}))}),Object.defineProperty(this,"selection",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(p.T.new(this._root,{themeTags:["selection","cursor"],layer:30}))}),Object.defineProperty(this,"_movePoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_lastPoint",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0}}),Object.defineProperty(this,"_tooltipX",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_tooltipY",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"chart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_toX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_toY",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){this._settings.themeTags=m.Fy(this._settings.themeTags,["xy","cursor"]),super._afterNew(),this.setAll({width:l.AQ,height:l.AQ,isMeasured:!0,position:"absolute"}),this.states.create("hidden",{visible:!0,opacity:0}),this._drawLines(),this.setPrivateRaw("visible",!1),this._disposers.push(this.setTimeout((()=>{this.setPrivate("visible",!0)}),500)),this._disposers.push(this.lineX.events.on("positionchanged",(()=>{this._handleXLine()}))),this._disposers.push(this.lineY.events.on("positionchanged",(()=>{this._handleYLine()}))),this._disposers.push(this.lineX.events.on("focus",(t=>this._handleLineFocus(t.target)))),this._disposers.push(this.lineX.events.on("blur",(t=>this._handleLineBlur(t.target)))),this._disposers.push(this.lineY.events.on("focus",(t=>this._handleLineFocus(t.target)))),this._disposers.push(this.lineY.events.on("blur",(t=>this._handleLineBlur(t.target)))),m.be("keyboardevents")&&this._disposers.push(m.Oo(document,"keydown",(t=>{this._handleLineMove(t.keyCode)})))}_setUpTouch(){const t=this.chart;t&&(t.plotContainer._display.cancelTouch="none"!=this.get("behavior"))}_handleXLine(){let t=this.lineX.x(),e=!0;(t<0||t>this.width())&&(e=!1),this.lineX.setPrivate("visible",e)}_handleYLine(){let t=this.lineY.y(),e=!0;(t<0||t>this.height())&&(e=!1),this.lineY.setPrivate("visible",e)}_handleLineMove(t){let e="",i=0,s=.1;const n=this.chart;this._root.focused(this.lineX)?(n&&n.xAxes.length&&(s=n.xAxes.getIndex(0).getCellWidthPosition()),i=this.getPrivate("positionX",0),e="positionX",37==t?i-=s:39==t&&(i+=s)):this._root.focused(this.lineY)&&(n&&n.yAxes.length&&(s=n.yAxes.getIndex(0).getCellWidthPosition()),i=this.getPrivate("positionY",0),e="positionY",38==t?i-=s:40==t&&(i+=s)),i<0?i=0:i>1&&(i=1),""!=e&&this.set(e,i)}_handleLineFocus(t){this.setAll({positionX:this.getPrivate("positionX"),positionY:this.getPrivate("positionY"),alwaysShow:!0})}_handleLineBlur(t){this.setAll({positionX:void 0,positionY:void 0,alwaysShow:!1})}_prepareChildren(){if(super._prepareChildren(),this.isDirty("xAxis")){this._tooltipX=!1;const t=this.get("xAxis");if(t){const e=t.get("tooltip");e&&(this._tooltipX=!0,this._disposers.push(e.on("pointTo",(()=>{this._updateXLine(e)}))))}}if(this.isDirty("yAxis")){this._tooltipY=!1;const t=this.get("yAxis");if(t){const e=t.get("tooltip");e&&(this._tooltipY=!0,this._disposers.push(e.on("pointTo",(()=>{this._updateYLine(e)}))))}}}_handleSyncWith(){const t=this.chart;if(t){const e=this.get("syncWith"),i=[];e&&n.S6(e,(t=>{const e=t.chart;e&&i.push(e)})),t._otherCharts=i}}_updateChildren(){if(super._updateChildren(),this._handleSyncWith(),this.isDirty("positionX")||this.isDirty("positionY")){const t=this.get("positionX"),e=this.get("positionY");null==t&&null==e?this.hide(0):(this._movePoint=this.toGlobal(this._getPoint(this.get("positionX",0),this.get("positionY",0))),this.handleMove())}}_updateXLine(t){let e=f.NM(this._display.toLocal(t.get("pointTo",{x:0,y:0})).x,2);this._toX!=e&&(this.lineX.animate({key:"x",to:e,duration:t.get("animationDuration",0),easing:t.get("animationEasing")}),this._toX=e)}_updateYLine(t){let e=f.NM(this._display.toLocal(t.get("pointTo",{x:0,y:0})).y,2);this._toY!=e&&(this.lineY.animate({key:"y",to:e,duration:t.get("animationDuration",0),easing:t.get("animationEasing")}),this._toY=e)}_drawLines(){this.lineX.set("draw",(t=>{t.moveTo(0,0),t.lineTo(0,this.height())})),this.lineY.set("draw",(t=>{t.moveTo(0,0),t.lineTo(this.width(),0)}))}updateCursor(){this.get("alwaysShow")&&(this._movePoint=this.toGlobal(this._getPoint(this.get("positionX",0),this.get("positionY",0)))),this.handleMove()}_setChart(t){this.chart=t,this._handleSyncWith();const e=t.plotContainer;this.events.on("boundschanged",(()=>{this._disposers.push(this.setTimeout((()=>{this.updateCursor()}),50))})),m.be("touchevents")&&(this._disposers.push(e.events.on("click",(t=>{m.z6(t.originalEvent)&&this._handleMove(t)}))),this._setUpTouch()),this._disposers.push(e.events.on("pointerdown",(t=>{this._handleCursorDown(t)}))),this._disposers.push(e.events.on("globalpointerup",(t=>{this._handleCursorUp(t),t.native||this.isHidden()||this._handleMove(t)}))),this._disposers.push(e.events.on("globalpointermove",(t=>{(this.get("syncWith")||0!=b.XP(e._downPoints).length||t.native||!this.isHidden())&&this._handleMove(t)})));const i=this.parent;i&&i.children.moveValue(this.selection)}_inPlot(t){const e=this.chart;return!!e&&e.inPlot(t)}_handleCursorDown(t){if(2==t.originalEvent.button)return;const e=t.point;let i=this._display.toLocal(e);const s=this.chart;if(this.selection.set("draw",(()=>{})),s&&this._inPlot(i)){if(this._downPoint=i,"none"!=this.get("behavior")){this.selection.show();const e="selectstarted";this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this,originalEvent:t.originalEvent})}let e=this._getPosition(i).x,s=this._getPosition(i).y;this.setPrivate("downPositionX",e),this.setPrivate("downPositionY",s)}}_handleCursorUp(t){if(this._downPoint){const e=this.get("behavior","none");if("none"!=e){"z"===e.charAt(0)&&this.selection.hide();const i=t.point;let s=this._display.toLocal(i);const n=this._downPoint,a=this.get("moveThreshold",1);if(s&&n){let i=!1;if("zoomX"!==e&&"zoomXY"!==e&&"selectX"!==e&&"selectXY"!==e||Math.abs(s.x-n.x)>a&&(i=!0),"zoomY"!==e&&"zoomXY"!==e&&"selectY"!==e&&"selectXY"!==e||Math.abs(s.y-n.y)>a&&(i=!0),i){const e="selectended";this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this,originalEvent:t.originalEvent})}else{const e="selectcancelled";this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this,originalEvent:t.originalEvent})}}}}this._downPoint=void 0}_handleMove(t){if(this.getPrivate("visible")){const e=this.chart;if(e&&b.XP(e.plotContainer._downPoints).length>1)return void this.set("forceHidden",!0);this.set("forceHidden",!1);const i=t.point,s=this._lastPoint;if(Math.round(s.x)===Math.round(i.x)&&Math.round(s.y)===Math.round(i.y))return;this._lastPoint=i,this.setPrivate("lastPoint",i),this.handleMove({x:i.x,y:i.y},!1,t.originalEvent)}}_getPosition(t){return{x:t.x/this.width(),y:t.y/this.height()}}handleMove(t,e,i){t||(t=this._movePoint);const s=this.get("alwaysShow");if(!t)return void this.hide(0);this._movePoint=t;let n=this._display.toLocal(t),a=this.chart;if(a&&(this._inPlot(n)||this._downPoint)){if(a._movePoint=t,this.isHidden()){this.show();"z"==this.get("behavior","").charAt(0)&&this.selection.set("draw",(()=>{}))}let o=n.x,r=n.y,h=this._getPosition(n);this.setPrivate("point",n);let l=this.get("snapToSeries");this._downPoint&&(l=void 0);let u=this.get("positionX"),d=h.x;_.hj(u)&&(d=u);let c=this.get("positionY"),g=h.y;_.hj(c)&&(g=c),this.setPrivate("positionX",d),this.setPrivate("positionY",g);const p=this._getPoint(d,g);if(o=p.x,r=p.y,a.xAxes.each((t=>{t._handleCursorPosition(d,l),s&&t.handleCursorShow()})),a.yAxes.each((t=>{t._handleCursorPosition(g,l),s&&t.handleCursorShow()})),!e){a._handleCursorPosition();const e="cursormoved";this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this,point:t,originalEvent:i})}this._updateLines(o,r),a.arrangeTooltips()}else if(!this._downPoint&&!s){this.hide(0);const t="cursorhidden";this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this})}this._downPoint&&"none"!=this.get("behavior")&&this._updateSelection(n)}_getPoint(t,e){return{x:this.width()*t,y:this.height()*e}}_updateLines(t,e){this._tooltipX||this.lineX.set("x",t),this._tooltipY||this.lineY.set("y",e),this._drawLines()}_updateSelection(t){const e=this.selection,i=this.get("behavior"),s=this.width(),n=this.height();t.x<0&&(t.x=0),t.x>s&&(t.x=s),t.y<0&&(t.y=0),t.y>n&&(t.y=n),e.set("draw",(e=>{const a=this._downPoint;a&&("zoomXY"===i||"selectXY"===i?(e.moveTo(a.x,a.y),e.lineTo(a.x,t.y),e.lineTo(t.x,t.y),e.lineTo(t.x,a.y),e.lineTo(a.x,a.y)):"zoomX"===i||"selectX"===i?(e.moveTo(a.x,0),e.lineTo(a.x,n),e.lineTo(t.x,n),e.lineTo(t.x,0),e.lineTo(a.x,0)):"zoomY"!==i&&"selectY"!==i||(e.moveTo(0,a.y),e.lineTo(s,a.y),e.lineTo(s,t.y),e.lineTo(0,t.y),e.lineTo(0,a.y)))}))}_onHide(){if(this.isHidden()){let t=this.chart;t&&(t.xAxes.each((t=>{t.handleCursorHide()})),t.yAxes.each((t=>{t.handleCursorHide()})),t.series.each((t=>{t.handleCursorHide()})))}super._onHide()}_onShow(){if(!this.isHidden()){let t=this.chart;t&&(t.xAxes.each((t=>{t.handleCursorShow()})),t.yAxes.each((t=>{t.handleCursorShow()})))}super._onShow()}_dispose(){super._dispose(),this.selection.dispose()}}Object.defineProperty(w,"className",{enumerable:!0,configurable:!0,writable:!0,value:"XYCursor"}),Object.defineProperty(w,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:g.W.classNames.concat([w.className])});var x=i(24470),y=i(38487),P=i(84668),D=i(35105);class I extends y.m{constructor(){super(...arguments),Object.defineProperty(this,"_dataGrouped",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_seriesDataGrouped",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_groupingCalculated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_intervalDuration",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_baseDuration",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_intervalMax",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_intervalMin",{enumerable:!0,configurable:!0,writable:!0,value:{}})}_afterNew(){this._settings.themeTags=m.Fy(this._settings.themeTags,["axis"]),super._afterNew(),this._setBaseInterval(this.get("baseInterval")),this.on("baseInterval",(()=>{this._setBaseInterval(this.get("baseInterval"))}))}_setBaseInterval(t){this.setPrivateRaw("baseInterval",t),this._baseDuration=D.WI(t)}_fixZoomFactor(){const t=this.get("maxZoomFactor");null!=t&&t!=1/0?this.setPrivateRaw("maxZoomFactor",t):this.setPrivateRaw("maxZoomFactor",Math.round((this.getPrivate("max",0)-this.getPrivate("min",0))/this.baseMainDuration()))}_groupData(){const t=this.getPrivate("min"),e=this.getPrivate("max");if(_.hj(t)&&_.hj(e)){this._fixZoomFactor();const t=this.getPrivate("groupInterval");if(t?this._setBaseInterval(t):this._setBaseInterval(this.get("baseInterval")),this.isDirty("groupInterval")){let t=this.get("groupInterval");t&&(this.setRaw("groupIntervals",[t]),this._handleRangeChange())}if(this.isDirty("groupData")&&!this._dataGrouped){if(this.get("groupData"))n.S6(this.series,(t=>{this._groupSeriesData(t)})),this._handleRangeChange();else{let t=this.get("baseInterval"),e=t.timeUnit+t.count;n.S6(this.series,(t=>{t.setDataSet(e),t.resetGrouping()})),this._setBaseInterval(t),this.setPrivateRaw("groupInterval",void 0),this.markDirtyExtremes()}this._dataGrouped=!0}}}_groupSeriesData(t){if(this.get("groupData")&&!t.get("groupDataDisabled")){this._dataGrouped=!0,this._seriesDataGrouped=!0;let e=[],i=this.baseMainDuration(),s=this.get("groupIntervals");n.S6(s,(t=>{D.WI(t)>i&&e.push(t)})),t._dataSets={};const a=this.getPrivate("name")+this.get("renderer").getPrivate("letter");let o;const r=t.get("baseAxis");t.get("xAxis")===r?o=t._valueYFields:t.get("yAxis")===r&&(o=t._valueXFields);let h=t._mainDataItems,l=this.get("baseInterval"),u=l.timeUnit+l.count;t._dataSets[u]=h;const d=t.get("groupDataCallback");let c=t.get("groupDataWithOriginals",!1);d&&(c=!0);const g=this._root.locale.firstDayOfWeek,p=this._root.utc,v=this._root.timezone;n.S6(e,(e=>{let i,s=-1/0,r=e.timeUnit+e.count;t._dataSets[r]=[];let l={},u={},m={},f={};n.S6(o,(e=>{l[e]=0,u[e]=0,m[e]=t.get(e+"Grouped"),f[e]=e+"Working"}));let w,y,P=D.g9(e.timeUnit);h[0]&&(w=new Date(h[0].get(a))),n.S6(h,(h=>{let I,T=h.get(a),M=D.NM(new Date(T),e.timeUnit,e.count,g,p,w,v).getTime();s<M-P/24?(I=b.JG(h.dataContext),i=new x.z(t,I,t._makeDataItem(I)),i.setRaw(a,M),t._dataSets[r].push(i),n.S6(o,(t=>{let e=h.get(t);_.hj(e)?(i.setRaw(t,e),i.setRaw(f[t],e),u[t]=1,l[t]=e):(l[t]=0,u[t]=0)})),c&&i.set("originals",[h]),d&&y&&d(y,e),y=i):(n.S6(o,(t=>{let e=m[t],s=h.get(t);if(null!=s){let n=i.get(t);switch(e){case"close":i.setRaw(t,s);break;case"sum":i.setRaw(t,n+s);break;case"open":break;case"low":s<n&&i.setRaw(t,s);break;case"high":s>n&&i.setRaw(t,s);break;case"average":u[t]++,l[t]+=s;let e=l[t]/u[t];i.setRaw(t,e);break;case"extreme":Math.abs(s)>Math.abs(n)&&i.setRaw(t,s)}i.setRaw(f[t],i.get(t));let o=b.JG(h.dataContext);o[a]=M,i.dataContext=o}})),c&&i.get("originals").push(h)),s=M})),d&&y&&d(y,e)})),t._dataSetId&&t.setDataSet(t._dataSetId),this.markDirtySize()}}_clearDirty(){super._clearDirty(),this._groupingCalculated=!1,this._dataGrouped=!1}getGroupInterval(t){let e=this.get("baseInterval"),i=D.Pk(0,t,this.get("groupCount",1/0),this.get("groupIntervals"));return D.WI(i)<D.WI(e)&&(i=Object.assign({},e)),i}getIntervalMax(t){return this._intervalMax[t.timeUnit+t.count]}getIntervalMin(t){return this._intervalMin[t.timeUnit+t.count]}_handleRangeChange(){super._handleRangeChange();let t=Math.round(this.getPrivate("selectionMin")),e=Math.round(this.getPrivate("selectionMax"));if(_.hj(t)&&_.hj(e)){if(0==this.get("endLocation")&&(e+=1),this.get("groupData")&&!this._groupingCalculated){this._groupingCalculated=!0;let i=e-t+(this.get("startLocation",0)+(1-this.get("endLocation",1))*this.baseDuration()),s=this.get("groupInterval");s||(s=this.getGroupInterval(i));let a=this.getPrivate("groupInterval");if(s&&(!a||a.timeUnit!==s.timeUnit||a.count!==s.count||this._seriesDataGrouped)){this._seriesDataGrouped=!1,this.setPrivateRaw("groupInterval",s),this._setBaseInterval(s);let t=s.timeUnit+s.count;n.S6(this.series,(e=>{e.get("baseAxis")===this&&e.setDataSet(t)})),this.markDirtyExtremes(),this._root.events.once("frameended",(()=>{this._root.events.once("frameended",(()=>{const t="groupintervalchanged";this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this})}))}))}}n.S6(this.series,(i=>{if(i.get("baseAxis")===this){let s=this.getPrivate("name")+this.get("renderer").getPrivate("letter");let a=n.Tb(i.dataItems,(e=>P.qu(e.get(s),t))).index;a>0&&(a-=1),e+=this.baseDuration()*(1-this.get("endLocation",1));let o=n.sK(i.dataItems,(t=>P.qu(t.get(s),e))).index,r=o;r>1&&r--;const h=i.dataItems[a],l=i.dataItems[r];let u,d;h&&(d=h.get(s)),l&&(u=l.get(s));let c=!1;null!=u&&null!=d&&(u<t||d>e)&&(c=!0),i.setPrivate("outOfSelection",c),i.setPrivate("startIndex",a),i.setPrivate("endIndex",o)}}))}}_adjustMinMax(t,e,i,s){return{min:t,max:e,step:(e-t)/i}}intervalDuration(){return this._intervalDuration}_saveMinMax(t,e){let i=this.getPrivate("groupInterval");i||(i=this.get("baseInterval"));let s=i.timeUnit+i.count;this._intervalMin[s]=t,this._intervalMax[s]=e}_getM(t){return"month"==t||"year"==t||"day"==t?1.05:1.01}_prepareAxisItems(){const t=this.getPrivate("min"),e=this.getPrivate("max");if(_.hj(t)&&_.hj(e)){const e=Math.round(this.getPrivate("selectionMin")),i=Math.round(this.getPrivate("selectionMax")),s=this.get("renderer"),a=this.getPrivate("baseInterval");let o=e,r=0;const h=this.get("gridIntervals");let l=D.Pk(0,i-e,s.gridCount(),h);D.WI(l)<this.baseDuration()&&(l=Object.assign({},a));const u=D.WI(l);this._intervalDuration=u;const d=D.XC(l.timeUnit),c=this._root.locale.firstDayOfWeek,g=this._root.utc,p=this._root.timezone;o=D.NM(new Date(e-u),l.timeUnit,l.count,c,g,new Date(t),p).getTime();let v,m=o-u;const f=this.get("dateFormats");for(this.setPrivateRaw("gridInterval",l);o<i+u;){let t;this.dataItems.length<r+1?(t=new x.z(this,void 0,{}),this._dataItems.push(t),this.processDataItem(t)):t=this.dataItems[r],this._createAssets(t,[]),this._toggleDataItem(t,!0),t.setRaw("value",o);let e=o+D.g9(l.timeUnit,l.count*this._getM(l.timeUnit));e=D.NM(new Date(e),l.timeUnit,1,c,g,void 0,p).getTime(),t.setRaw("endValue",e);let i=new Date(o);v=f[l.timeUnit],d&&this.get("markUnitChange")&&_.hj(m)&&"year"!=l.timeUnit&&D.oE(o,m,d,g,p)&&(v=this.get("periodChangeDateFormats")[l.timeUnit]);const s=t.get("label");if(s&&s.set("text",this._root.dateFormatter.format(i,v)),this._prepareDataItem(t,l.count),m=o,o=e,o==m)break;r++}for(let t=r;t<this.dataItems.length;t++)this._toggleDataItem(this.dataItems[t],!1);n.S6(this.series,(t=>{t.inited&&t._markDirtyAxes()}))}this._updateGhost()}_updateFinals(t,e){this.setPrivateRaw("selectionMinFinal",this.positionToValue(t)),this.setPrivateRaw("selectionMaxFinal",this.positionToValue(e))}_getDelta(){this._deltaMinMax=this.baseDuration()/2}_fixMin(t){const e=this.getPrivate("baseInterval"),i=this._root.locale.firstDayOfWeek,s=this._root.timezone,n=this._root.utc,a=e.timeUnit;let o=D.NM(new Date(t),a,e.count,i,n,void 0,s).getTime(),r=o+D.g9(a,e.count*this._getM(a));return r=D.NM(new Date(r),a,1,i,n,void 0,s).getTime(),o+(r-o)*this.get("startLocation",0)}_fixMax(t){const e=this.getPrivate("baseInterval"),i=this._root.locale.firstDayOfWeek,s=this._root.timezone,n=this._root.utc,a=e.timeUnit;let o=D.NM(new Date(t),a,e.count,i,n,void 0,s).getTime(),r=o+D.g9(a,e.count*this._getM(a));return r=D.NM(new Date(r),a,1,i,n,void 0,s).getTime(),o+(r-o)*this.get("endLocation",1)}_updateDates(t,e){}baseDuration(){return this._baseDuration}baseMainDuration(){return D.WI(this.get("baseInterval"))}processSeriesDataItem(t,e){const i=this.getPrivate("baseInterval");t.open||(t.open={}),t.close||(t.close={}),n.S6(e,(e=>{let s=t.get(e);if(_.hj(s)){let n=t.open[e],a=t.close[e];if(s>=n&&s<=a);else{const o=this._root.locale.firstDayOfWeek,r=this._root.utc,h=this._root.timezone,l=i.timeUnit,u=i.count;n=D.NM(new Date(s),l,u,o,r,void 0,h).getTime(),a=n+D.g9(l,u*this._getM(l)),a=D.NM(new Date(a),l,1,o,r,void 0,h).getTime(),t.open[e]=n,t.close[e]=a}this._updateDates(n,t.component)}}))}getDataItemPositionX(t,e,i,s){let n,a;t.open&&t.close?(n=t.open[e],a=t.close[e]):(n=t.get(e),a=n);let o=n+(a-n)*i;return o=this._baseValue+(o-this._baseValue)*s,this.valueToPosition(o)}getDataItemCoordinateX(t,e,i,s){return this._settings.renderer.positionToCoordinate(this.getDataItemPositionX(t,e,i,s))}getDataItemPositionY(t,e,i,s){let n,a;t.open&&t.close?(n=t.open[e],a=t.close[e]):(n=t.get(e),a=n);let o=n+(a-n)*i;return o=this._baseValue+(o-this._baseValue)*s,this.valueToPosition(o)}getDataItemCoordinateY(t,e,i,s){return this._settings.renderer.positionToCoordinate(this.getDataItemPositionY(t,e,i,s))}roundAxisPosition(t,e){let i=this.positionToValue(t);i-=(e-.5)*this.baseDuration();let s=this.getPrivate("baseInterval");if(!_.i2(i)){const t=this._root.locale.firstDayOfWeek,n=s.timeUnit,a=this._root.utc,o=this._root.timezone,r=s.count;i=D.NM(new Date(i),n,r,t,a,new Date(this.getPrivate("min",0)),o).getTime();let h=D.zX(s,new Date(i),t,a,o);return o&&(i=D.NM(new Date(i+.05*this.baseDuration()),n,r,t,a,new Date(this.getPrivate("min",0)),o).getTime(),h=D.zX(s,new Date(i+h*e),t,a,o)),this.valueToPosition(i+h*e)}return NaN}getTooltipText(t,e){if(null!=this.getPrivate("min")){let i=this.get("tooltipDateFormats")[this.getPrivate("baseInterval").timeUnit],s=this.positionToValue(t);if(_.hj(s)){let t=new Date(s),n=this.getPrivate("baseInterval"),a=D.zX(n,t,this._root.locale.firstDayOfWeek,this._root.utc,this._root.timezone);return!1!==e&&(t=new Date(s+this.get("tooltipIntervalOffset",-this.get("tooltipLocation",.5))*a)),this._root.dateFormatter.format(t,this.get("tooltipDateFormat",i))}}return""}getSeriesItem(t,e,i,s){let a=this.getPrivate("name")+this.get("renderer").getPrivate("letter"),o=this.positionToValue(e);null==i&&(i=.5),o-=(i-.5)*this.baseDuration();const r=n.sK(t.dataItems,(t=>{let e=0;return t.open&&(e=t.open[a]),P.qu(e,o)}));if(s||t.get("snapTooltip")){let e=t.dataItems[r.index-1],i=t.dataItems[r.index];if(e&&i&&e.open&&i.close){let t=e.open[a],s=i.close[a];if(Math.abs(o-t)>Math.abs(o-s))return i}if(e)return e;if(i)return i}else{const e=t.dataItems[r.index-1];if(e&&e.open&&e.close){let t=e.open[a],i=e.close[a];if(o>=t&&o<=i)return e}}}shouldGap(t,e,i,s){const n=t.get(s);return e.get(s)-n>this.baseDuration()*i}zoomToDates(t,e,i){this.zoomToValues(t.getTime(),e.getTime(),i)}positionToDate(t){return new Date(this.positionToValue(t))}dateToPosition(t){return this.valueToPosition(t.getTime())}getCellWidthPosition(){let t=this.getPrivate("selectionMax",this.getPrivate("max")),e=this.getPrivate("selectionMin",this.getPrivate("min"));return _.hj(t)&&_.hj(e)?this._intervalDuration/(t-e):.05}}Object.defineProperty(I,"className",{enumerable:!0,configurable:!0,writable:!0,value:"DateAxis"}),Object.defineProperty(I,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:y.m.classNames.concat([I.className])});var T=i(39286),M=i(71570),X=i(97873),C=i(80659),Y=i(91934),S=i(77066),A=i(36494),j=i(4862),k=i(21149),O=i(18661),L=i(80184);const z=t=>{let{municipal:e,barangay:i,nextwidget:g}=t;const p=(0,s.useRef)({}),v=(0,s.useRef)({}),_=(0,s.useRef)({}),m=(0,s.useRef)({}),[f,b]=(0,s.useState)([]),x="lot-progress";return(0,s.useEffect)((()=>{(0,S.sb)(e,i).then((t=>{b(t)}))}),[e,i]),(0,s.useEffect)((()=>{var t,s;s=x,n.S6(a.i_.rootElements,(function(t){t.dom.id===s&&t.dispose()}));var g=o.f.new(x);g.container.children.clear(),null===(t=g._logo)||void 0===t||t.dispose(),g.setThemes([C.Z.new(g),Y.Z.new(g)]);var b=g.container.children.push(c.z.new(g,{panX:!1,panY:!1,wheelX:"panX",wheelY:"zoomX",paddingBottom:35}));m.current=b,b.children.unshift(r._.new(g,{text:"Monthly Progress of Handed-Over Lots",fontSize:14,fontWeight:"bold",textAlign:"center",fill:h.$_("#ffffff"),x:l.aQ(50),centerX:l.aQ(50),paddingTop:0,paddingBottom:0})),b.set("cursor",w.new(g,{behavior:"zoomX"})).lineY.set("visible",!1);var P=b.xAxes.push(I.new(g,{maxDeviation:0,groupData:!0,baseInterval:{timeUnit:"day",count:1},groupIntervals:[{timeUnit:"month",count:1}],renderer:T.n.new(g,{minGridDistance:60,strokeOpacity:1,strokeWidth:1,stroke:h.$_("#ffffff")})}));P.get("renderer").labels.template.setAll({textAlign:"center",fill:h.$_("#ffffff"),fontSize:12});var D=b.yAxes.push(y.m.new(g,{calculateTotals:!0,min:0,renderer:M.j.new(g,{minGridDistance:60,strokeOpacity:1,strokeWidth:1,stroke:h.$_("#ffffff")})}));D.get("renderer").labels.template.setAll({textAlign:"center",fill:h.$_("#ffffff"),fontSize:12}),v.current=P,_.current=D,D.children.unshift(r._.new(g,{rotation:-90,text:"No. of handed-over lots",y:l.CI,centerX:l.CI,fill:h.$_("#ffffff"),fontSize:11}));var L=b.children.push(u.D.new(g,{centerX:l.CI,centerY:l.aQ(50),x:l.CI,y:l.aQ(108)}));p.current=L,L.labels.template.setAll({oversizedBehavior:"truncate",fill:h.$_("#ffffff"),fontSize:17,scale:.8});var z,N=b.series.push(X.d.new(g,{name:"Series",xAxis:P,yAxis:D,valueYField:"value",valueXField:"date",valueYGrouped:"sum"}));return N.bullets.push((function(){return d.g.new(g,{locationY:1,locationX:.5,sprite:r._.new(g,{text:"{valueYTotal}",fill:g.interfaceColors.get("alternativeText"),centerY:0,centerX:l.CI,populateText:!0,fontSize:10})})})),N.columns.template.events.on("click",(t=>{var s;const n=null===(s=t.target.dataItem)||void 0===s?void 0:s.dataContext,a=(0,S.vc)(n.date,"yyyy-MM-dd"),o="Municipality = '"+e+"'",r=o+" AND "+("Barangay = '"+i+"'"),h="HandedOverDate IS NOT NULL AND HandedOverDate = date'"+a+"'";var l=A.Aj.createQuery();l.where=e&&i?h+" AND "+r:e&&!i?h+" AND "+o:h,j.ei.whenLayerView(A.Aj).then((t=>{A.Aj.queryFeatures(l).then((e=>{const i=e.features.length;let s=[];for(var n=0;n<i;n++){var a=e.features[n].attributes.OBJECTID;s.push(a)}var o=new k.Z({objectIds:s});A.Aj.queryExtent(o).then((function(t){t.extent&&j.ei.goTo(t.extent)})),z&&z.remove(),z=t.highlight(s),j.ei.on("click",(function(){t.filter=new O.Z({where:void 0}),z.remove()}))}))}))})),N.columns.template.setAll({tooltipText:"Total: {valueY}",tooltipY:l.aQ(10),strokeOpacity:0}),N.data.setAll(f),b.appear(1e3,100),()=>{g.dispose()}}),[x,f]),(0,L.jsx)(L.Fragment,{children:"charts"===g?(0,L.jsx)("div",{id:x,style:{height:"32vh",width:"60%",backgroundColor:"#2b2b2b",color:"white",position:"absolute",zIndex:99,bottom:10,marginLeft:"1vw",marginRight:"auto"}}):(0,L.jsx)("div",{id:x,hidden:!0})})}}}]);
//# sourceMappingURL=90938.ba923314.chunk.js.map