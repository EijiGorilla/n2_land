"use strict";(self.webpackChunkn2_land=self.webpackChunkn2_land||[]).push([[97171],{97171:(e,t,i)=>{i.r(t),i.d(t,{default:()=>b});var l=i(72791),a=i(36494),n=i(4862),r=i(18661),s=i(21149),o=i(36801),c=i(59181),d=i(66817),u=i(97304),f=i(70565),h=i(54797),p=i(27663),v=i(82308),g=i(80659),m=i(91934),x=i(77066),y=i(26877),w=i(80184);const b=(0,l.memo)((e=>{let{municipal:t,barangay:i}=e;const b=(0,l.useRef)({}),A=(0,l.useRef)({}),R=(0,l.useRef)({}),[k,E]=(0,l.useState)([{category:String,value:Number,sliceSettings:{fill:d.$_("#00c5ff")}}]),[L,S]=(0,l.useState)(0),T="nlo-chart",j="Municipality = '"+t+"'",_=j+" AND "+("Barangay = '"+i+"'");return t&&!i?(a.vx.definitionExpression=j,a.tP.definitionExpression=j):i&&(a.vx.definitionExpression=_,a.tP.definitionExpression=_),(0,l.useEffect)((()=>{(0,x.nf)(t,i).then((e=>{E(e)})),(0,x.wU)().then((e=>{S(e)}))}),[t,i]),(0,l.useEffect)((()=>{var e,t;t=T,o.S6(c.i_.rootElements,(function(e){e.dom.id===t&&e.dispose()}));var i=u.f.new(T);i.container.children.clear(),null===(e=i._logo)||void 0===e||e.dispose(),i.setThemes([g.Z.new(i),m.Z.new(i)]);var l=i.container.children.push(p.u.new(i,{layout:i.verticalLayout}));R.current=l;var x=l.series.push(v.f.new(i,{name:"Series",categoryField:"category",valueField:"value",legendValueText:"{valuePercentTotal.formatNumber('#.')}% ({value})",radius:f.aQ(45),innerRadius:f.aQ(20),scale:1.8}));b.current=x,l.series.push(x),x.slices.template.setAll({fillOpacity:.9,stroke:d.$_("#ffffff"),strokeWidth:.5,strokeOpacity:1,templateField:"sliceSettings"}),x.labels.template.setAll({visible:!1,scale:0}),x.ticks.template.setAll({visible:!1,scale:0}),x.slices.template.events.on("click",(e=>{var t,i=(null===(t=e.target.dataItem)||void 0===t?void 0:t.dataContext).category;const l=y.Rg.find((e=>e.category===i)),o=null===l||void 0===l?void 0:l.value;var c,d=a.vx.createQuery();n.ei.when((function(){n.ei.whenLayerView(a.vx).then((e=>{a.vx.queryFeatures(d).then((function(t){const i=t.features.length;let l=[];for(var o=0;o<i;o++){var d=t.features[o].attributes.OBJECTID;l.push(d)}var u=new s.Z({objectIds:l});a.vx.queryExtent(u).then((function(e){e.extent&&n.ei.goTo(e.extent)})),c&&c.remove(),c=e.highlight(l),n.ei.on("click",(function(){e.filter=new r.Z({where:void 0}),c.remove()}))})),e.filter=new r.Z({where:y.D6+" = "+o})}))}))})),x.data.setAll(k);var w=l.children.push(h.D.new(i,{centerX:f.aQ(50),x:f.aQ(50),scale:1.03}));A.current=w,w.data.setAll(x.dataItems),w.markers.template.setAll({width:18,height:18}),w.markerRectangles.template.setAll({cornerRadiusTL:10,cornerRadiusTR:10,cornerRadiusBL:10,cornerRadiusBR:10}),l.onPrivate("width",(function(e){var t=Math.max(e-l.height()-270,270);w.labels.template.setAll({width:t,maxWidth:t})}));return w.labels.template.setAll({oversizedBehavior:"truncate",fill:d.$_("#ffffff")}),w.valueLabels.template.setAll({textAlign:"right",width:50,fill:d.$_("#ffffff")}),w.itemContainers.template.setAll({paddingTop:5,paddingBottom:1}),x.appear(1e3,100),()=>{i.dispose()}}),[T,k]),(0,l.useEffect)((()=>{var e,t;null===(e=b.current)||void 0===e||e.data.setAll(k),null===(t=A.current)||void 0===t||t.data.setAll(b.current.dataItems)})),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{style:{display:"flex",marginTop:"3px",marginLeft:"15px",marginRight:"15px",justifyContent:"space-between"},children:[(0,w.jsxs)("dl",{style:{alignItems:"center"},children:[(0,w.jsx)("dt",{style:{color:"#D3D3D3",fontSize:"1.1rem"},children:"TOTAL NON-LAND OWNERS"}),(0,w.jsx)("dd",{style:{color:"#6ede00",fontSize:"1.9rem",fontWeight:"bold",fontFamily:"calibri",lineHeight:"1.2",margin:"auto"},children:(0,x.oc)(L)})]}),(0,w.jsx)("img",{src:"https://EijiGorilla.github.io/Symbols/NLO_Logo.svg",alt:"Structure Logo",height:"20%",width:"20%",style:{paddingTop:"5px",paddingLeft:"5px"}})]}),(0,w.jsx)("div",{id:T,style:{height:"40vh",backgroundColor:"rgb(0,0,0,0)",color:"white"}})]})}))}}]);
//# sourceMappingURL=97171.5bbac12f.chunk.js.map