{"version":3,"file":"static/js/8477.a11c42b2.chunk.js","mappings":"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","sources":["chart/StructureChart.tsx"],"sourcesContent":["import { useEffect, useRef, useState, memo } from 'react';\r\nimport { structureLayer } from '../layers';\r\nimport { view } from '../Scene';\r\nimport FeatureFilter from '@arcgis/core/layers/support/FeatureFilter';\r\nimport Query from '@arcgis/core/rest/support/Query';\r\nimport * as am5 from '@amcharts/amcharts5';\r\nimport * as am5xy from '@amcharts/amcharts5/xy';\r\nimport * as am5percent from '@amcharts/amcharts5/percent';\r\nimport am5themes_Animated from '@amcharts/amcharts5/themes/Animated';\r\nimport am5themes_Responsive from '@amcharts/amcharts5/themes/Responsive';\r\nimport {\r\n  generateStrucMoaData,\r\n  generateStrucNumber,\r\n  generateStructureData,\r\n  thousands_separators,\r\n} from '../components/Query';\r\nimport { CalciteLabel } from '@esri/calcite-components-react';\r\nimport {\r\n  statusMoaStructureQuery,\r\n  statusStructureQuery,\r\n  structureMoaField,\r\n  structureStatusField,\r\n} from '../StatusUniqueValues';\r\n\r\n// Dispose function\r\nfunction maybeDisposeRoot(divId: any) {\r\n  am5.array.each(am5.registry.rootElements, function (root) {\r\n    if (root.dom.id === divId) {\r\n      root.dispose();\r\n    }\r\n  });\r\n}\r\n\r\n///*** Others */\r\n\r\n/// Draw chart\r\nconst StructureChart = memo(({ municipal, barangay }: any) => {\r\n  // 1. Structure\r\n  const pieSeriesRef = useRef<unknown | any | undefined>({});\r\n  const legendRef = useRef<unknown | any | undefined>({});\r\n  const chartRef = useRef<unknown | any | undefined>({});\r\n  const [structureData, setStructureData] = useState([\r\n    {\r\n      category: String,\r\n      value: Number,\r\n      sliceSettings: {\r\n        fill: am5.color('#00c5ff'),\r\n      },\r\n    },\r\n  ]);\r\n\r\n  const chartID = 'structure-chart';\r\n  const [structureNumber, setStructureNumber] = useState([]);\r\n\r\n  // 2.Mode of Acquisition\r\n  const barSeriesRef = useRef<unknown | any | undefined>({});\r\n  const yAxisRef = useRef<unknown | any | undefined>({});\r\n  const chartRef_moa = useRef<unknown | any | undefined>({});\r\n  const [structureMoaData, setStructureMoaData] = useState([\r\n    {\r\n      category: String,\r\n      value: Number,\r\n    },\r\n  ]);\r\n  const chartID_moa = 'structure-moa';\r\n\r\n  // Query\r\n  const queryMunicipality = \"Municipality = '\" + municipal + \"'\";\r\n  const queryBarangay = \"Barangay = '\" + barangay + \"'\";\r\n  const queryMunicipalBarangay = queryMunicipality + ' AND ' + queryBarangay;\r\n\r\n  if (municipal && !barangay) {\r\n    structureLayer.definitionExpression = queryMunicipality;\r\n  } else if (barangay) {\r\n    structureLayer.definitionExpression = queryMunicipalBarangay;\r\n  }\r\n\r\n  useEffect(() => {\r\n    generateStructureData(municipal, barangay).then((result: any) => {\r\n      setStructureData(result);\r\n    });\r\n\r\n    // Structure Number\r\n    generateStrucNumber().then((response: any) => {\r\n      setStructureNumber(response);\r\n    });\r\n\r\n    generateStrucMoaData(municipal, barangay).then((response: any) => {\r\n      setStructureMoaData(response);\r\n    });\r\n  }, [municipal, barangay]);\r\n\r\n  useEffect(() => {\r\n    // Dispose previously created root element\r\n\r\n    maybeDisposeRoot(chartID);\r\n\r\n    var root = am5.Root.new(chartID);\r\n    root.container.children.clear();\r\n    root._logo?.dispose();\r\n\r\n    // Set themesf\r\n    // https://www.amcharts.com/docs/v5/concepts/themes/\r\n    root.setThemes([am5themes_Animated.new(root), am5themes_Responsive.new(root)]);\r\n    const responsive = am5themes_Responsive.new(root);\r\n\r\n    // Create chart\r\n    // https://www.amcharts.com/docs/v5/charts/percent-charts/pie-chart/\r\n    var chart = root.container.children.push(\r\n      am5percent.PieChart.new(root, {\r\n        layout: root.verticalLayout,\r\n      }),\r\n    );\r\n    chartRef.current = chart;\r\n\r\n    // Create series\r\n    // https://www.amcharts.com/docs/v5/charts/percent-charts/pie-chart/#Series\r\n    var pieSeries = chart.series.push(\r\n      am5percent.PieSeries.new(root, {\r\n        name: 'Series',\r\n        categoryField: 'category',\r\n        valueField: 'value',\r\n        //legendLabelText: \"[{fill}]{category}[/]\",\r\n        legendValueText: \"{valuePercentTotal.formatNumber('#.')}% ({value})\",\r\n        radius: am5.percent(45), // outer radius\r\n        innerRadius: am5.percent(20),\r\n        scale: 2,\r\n      }),\r\n    );\r\n    pieSeriesRef.current = pieSeries;\r\n    chart.series.push(pieSeries);\r\n\r\n    // Set slice opacity and stroke color\r\n    pieSeries.slices.template.setAll({\r\n      fillOpacity: 0.9,\r\n      stroke: am5.color('#ffffff'),\r\n      strokeWidth: 0.5,\r\n      strokeOpacity: 1,\r\n      templateField: 'sliceSettings',\r\n    });\r\n\r\n    // Disabling labels and ticksll\r\n    pieSeries.labels.template.setAll({\r\n      visible: false,\r\n      scale: 0,\r\n    });\r\n    pieSeries.ticks.template.setAll({\r\n      visible: false,\r\n      scale: 0,\r\n    });\r\n\r\n    // EventDispatcher is disposed at SpriteEventDispatcher...\r\n    // It looks like this error results from clicking events\r\n    pieSeries.slices.template.events.on('click', (ev) => {\r\n      var Selected: any = ev.target.dataItem?.dataContext;\r\n      var Category: string = Selected.category;\r\n      const find = statusStructureQuery.find((emp: any) => emp.category === Category);\r\n      const selectedStatus = find?.value;\r\n\r\n      var highlightSelect: any;\r\n      var query = structureLayer.createQuery();\r\n\r\n      view.when(function () {\r\n        view.whenLayerView(structureLayer).then((layerView): any => {\r\n          //chartLayerView = layerView;\r\n\r\n          structureLayer.queryFeatures(query).then(function (results) {\r\n            const RESULT_LENGTH = results.features;\r\n            const ROW_N = RESULT_LENGTH.length;\r\n\r\n            let objID = [];\r\n            for (var i = 0; i < ROW_N; i++) {\r\n              var obj = results.features[i].attributes.OBJECTID;\r\n              objID.push(obj);\r\n            }\r\n\r\n            var queryExt = new Query({\r\n              objectIds: objID,\r\n            });\r\n\r\n            structureLayer.queryExtent(queryExt).then(function (result) {\r\n              if (result.extent) {\r\n                view.goTo(result.extent);\r\n              }\r\n            });\r\n\r\n            if (highlightSelect) {\r\n              highlightSelect.remove();\r\n            }\r\n            highlightSelect = layerView.highlight(objID);\r\n\r\n            view.on('click', function () {\r\n              layerView.filter = new FeatureFilter({\r\n                where: undefined,\r\n              });\r\n              highlightSelect.remove();\r\n            });\r\n          }); // End of queryFeatures\r\n\r\n          layerView.filter = new FeatureFilter({\r\n            where: structureStatusField + ' = ' + selectedStatus,\r\n          });\r\n        }); // End of view.whenLayerView\r\n      }); // End of view.whenv\r\n    });\r\n\r\n    pieSeries.data.setAll(structureData);\r\n\r\n    // Legend\r\n    // https://www.amcharts.com/docs/v5/charts/percent-charts/legend-percent-series/\r\n    var legend = chart.children.push(\r\n      am5.Legend.new(root, {\r\n        centerX: am5.percent(50),\r\n        x: am5.percent(50),\r\n        scale: 1.03,\r\n      }),\r\n    );\r\n    legendRef.current = legend;\r\n    legend.data.setAll(pieSeries.dataItems);\r\n\r\n    // Change the size of legend markers\r\n    legend.markers.template.setAll({\r\n      width: 18,\r\n      height: 18,\r\n    });\r\n\r\n    // Change the marker shape\r\n    legend.markerRectangles.template.setAll({\r\n      cornerRadiusTL: 10,\r\n      cornerRadiusTR: 10,\r\n      cornerRadiusBL: 10,\r\n      cornerRadiusBR: 10,\r\n    });\r\n\r\n    // Responsive legend\r\n    // https://www.amcharts.com/docs/v5/tutorials/pie-chart-with-a-legend-with-dynamically-sized-labels/\r\n    // This aligns Legend to Left\r\n    const valueLabelsWidth = 50;\r\n    chart.onPrivate('width', function (width: any) {\r\n      const boxWidth = 270; //props.style.width;\r\n      // var availableSpace = Math.max(width - chart.height() - boxWidth, boxWidth);\r\n      var availableSpace = (boxWidth - valueLabelsWidth) * 1.1;\r\n      legend.labels.template.setAll({\r\n        width: availableSpace,\r\n        maxWidth: availableSpace,\r\n      });\r\n    });\r\n\r\n    // responsive.addRule({\r\n    //   name: 'Legend',\r\n    //   relevant: function (width, height) {\r\n    //     return width > chart.width();\r\n    //   },\r\n    //   settings: {\r\n    //     centerX: am5.percent(50),\r\n    //     x: am5.percent(50),\r\n    //     scale: 2,\r\n    //   },\r\n    // });\r\n\r\n    // To align legend items: valueLabels right, labels to left\r\n    // 1. fix width of valueLabels\r\n    // 2. dynamically change width of labels by screen size\r\n\r\n    // Change legend labelling properties\r\n    // To have responsive font size, do not set font size\r\n    legend.labels.template.setAll({\r\n      oversizedBehavior: 'truncate',\r\n      fill: am5.color('#ffffff'),\r\n      //textDecoration: \"underline\"\r\n      //width: am5.percent(200)\r\n      //fontWeight: \"300\"\r\n    });\r\n\r\n    legend.valueLabels.template.setAll({\r\n      textAlign: 'right',\r\n      // width: valueLabelsWidth,\r\n      fill: am5.color('#ffffff'),\r\n      //fontSize: LEGEND_FONT_SIZE,\r\n    });\r\n\r\n    legend.itemContainers.template.setAll({\r\n      // set space between legend items\r\n      paddingTop: 3,\r\n      paddingBottom: 1,\r\n    });\r\n\r\n    pieSeries.appear(1000, 100);\r\n\r\n    return () => {\r\n      root.dispose();\r\n    };\r\n  }, [chartID, structureData]);\r\n\r\n  useEffect(() => {\r\n    pieSeriesRef.current?.data.setAll(structureData);\r\n    legendRef.current?.data.setAll(pieSeriesRef.current.dataItems);\r\n  });\r\n\r\n  // Mode of Acquisition\r\n  useEffect(() => {\r\n    // Dispose previously created root element\r\n    maybeDisposeRoot(chartID_moa);\r\n\r\n    var root = am5.Root.new(chartID_moa);\r\n    root.container.children.clear();\r\n    root._logo?.dispose();\r\n\r\n    // Set themesf\r\n    // https://www.amcharts.com/docs/v5/concepts/themes/\r\n    root.setThemes([am5themes_Animated.new(root), am5themes_Responsive.new(root)]);\r\n\r\n    // Create chart\r\n    // https://www.amcharts.com/docs/v5/charts/xy-chart/\r\n    var chart = root.container.children.push(\r\n      am5xy.XYChart.new(root, {\r\n        panX: false,\r\n        panY: false,\r\n        wheelX: 'none',\r\n        wheelY: 'none',\r\n      }),\r\n    );\r\n    chartRef_moa.current = chart;\r\n\r\n    // Create axes\r\n    // https://www.amcharts.com/docs/v5/charts/xy-chart/axes/\r\n    var yRenderer = am5xy.AxisRendererY.new(root, {\r\n      minGridDistance: 5,\r\n      strokeOpacity: 1,\r\n      strokeWidth: 1,\r\n      inversed: true,\r\n      stroke: am5.color('#ffffff'),\r\n    });\r\n    yRenderer.grid.template.set('location', 1);\r\n\r\n    var yAxis = chart.yAxes.push(\r\n      am5xy.CategoryAxis.new(root, {\r\n        maxDeviation: 0,\r\n        categoryField: 'category',\r\n        renderer: yRenderer,\r\n      }),\r\n    );\r\n\r\n    // Remove grid lines\r\n    yAxis.get('renderer').grid.template.set('forceHidden', true);\r\n\r\n    var xAxis = chart.xAxes.push(\r\n      am5xy.ValueAxis.new(root, {\r\n        maxDeviation: 0,\r\n        min: 0,\r\n        strictMinMax: true,\r\n        calculateTotals: true,\r\n        renderer: am5xy.AxisRendererX.new(root, {\r\n          visible: true,\r\n          strokeOpacity: 1,\r\n          strokeWidth: 1,\r\n          stroke: am5.color('#ffffff'),\r\n        }),\r\n      }),\r\n    );\r\n    // Remove grid lines\r\n    xAxis.get('renderer').grid.template.set('forceHidden', true);\r\n\r\n    // Label properties for yAxis (category axis)\r\n    yAxis.get('renderer').labels.template.setAll({\r\n      //oversizedBehavior: \"wrap\",\r\n      textAlign: 'center',\r\n      fill: am5.color('#ffffff'),\r\n      //maxWidth: 150,\r\n      fontSize: 12,\r\n    });\r\n\r\n    xAxis.get('renderer').labels.template.setAll({\r\n      fill: am5.color('#ffffff'),\r\n      fontSize: 10,\r\n    });\r\n\r\n    // Create series\r\n    // https://www.amcharts.com/docs/v5/charts/xy-chart/series/\r\n    var series = chart.series.push(\r\n      am5xy.ColumnSeries.new(root, {\r\n        name: 'Series 1',\r\n        xAxis: xAxis,\r\n        yAxis: yAxis,\r\n        valueXField: 'value',\r\n        sequencedInterpolation: true,\r\n        categoryYField: 'category',\r\n      }),\r\n    );\r\n    barSeriesRef.current = series;\r\n    chart.series.push(series);\r\n\r\n    var columnTemplate = series.columns.template;\r\n\r\n    columnTemplate.setAll({\r\n      draggable: true,\r\n      cursorOverStyle: 'pointer',\r\n      tooltipText: '{value}',\r\n      cornerRadiusBR: 10,\r\n      cornerRadiusTR: 10,\r\n      strokeOpacity: 0,\r\n    });\r\n\r\n    // Add Label bullet\r\n    series.bullets.push(function () {\r\n      return am5.Bullet.new(root, {\r\n        locationY: 1,\r\n        sprite: am5.Label.new(root, {\r\n          text: '{value}',\r\n          fill: root.interfaceColors.get('alternativeText'),\r\n          centerY: 8,\r\n          centerX: am5.p50,\r\n          fontSize: 13,\r\n          populateText: true,\r\n        }),\r\n      });\r\n    });\r\n\r\n    // Use different color by column\r\n    /*\r\n    columnTemplate.adapters.add('fill', (fill, target) => {\r\n      return chart.get('colors').getIndex(series.columns.indexOf(target));\r\n    });\r\n\r\n    columnTemplate.adapters.add('stroke', (stroke, target) => {\r\n      return chart.get('colors').getIndex(series.columns.indexOf(target));\r\n    });\r\n    */\r\n\r\n    series.columns.template.events.on('click', function (ev) {\r\n      var Selected: any = ev.target.dataItem?.dataContext;\r\n      var Category: string = Selected.category;\r\n      const find = statusMoaStructureQuery.find((emp: any) => emp.category === Category);\r\n      const selectedStatus = find?.value;\r\n\r\n      var highlightSelect: any;\r\n\r\n      var query = structureLayer.createQuery();\r\n      view.whenLayerView(structureLayer).then(function (layerView) {\r\n        //CHART_ELEMENT.style.visibility = \"visible\";\r\n\r\n        structureLayer.queryFeatures(query).then(function (results) {\r\n          const RESULT_LENGTH = results.features;\r\n          const ROW_N = RESULT_LENGTH.length;\r\n\r\n          let objID = [];\r\n          for (var i = 0; i < ROW_N; i++) {\r\n            var obj = results.features[i].attributes.OBJECTID;\r\n            objID.push(obj);\r\n          }\r\n\r\n          var queryExt = new Query({\r\n            objectIds: objID,\r\n          });\r\n\r\n          structureLayer.queryExtent(queryExt).then(function (result) {\r\n            if (result.extent) {\r\n              view.goTo(result.extent);\r\n            }\r\n          });\r\n\r\n          if (highlightSelect) {\r\n            highlightSelect.remove();\r\n          }\r\n          highlightSelect = layerView.highlight(objID);\r\n\r\n          view.on('click', function () {\r\n            layerView.filter = new FeatureFilter({\r\n              where: undefined,\r\n            });\r\n            highlightSelect.remove();\r\n          });\r\n        });\r\n        layerView.filter = new FeatureFilter({\r\n          where: structureMoaField + ' = ' + selectedStatus,\r\n        });\r\n      }); // End of whenLayerView\r\n    });\r\n\r\n    yAxisRef.current = yAxis;\r\n    yAxis.data.setAll(structureMoaData);\r\n    series.data.setAll(structureMoaData);\r\n\r\n    // Make stuff animate on load\r\n    // https://www.amcharts.com/docs/v5/concepts/animations/\r\n    series.appear(1000);\r\n    chart.appear(1000, 100);\r\n\r\n    return () => {\r\n      root.dispose();\r\n    };\r\n  }, [chartID_moa, structureMoaData]);\r\n\r\n  useEffect(() => {\r\n    barSeriesRef.current?.data.setAll(structureMoaData);\r\n    yAxisRef.current?.data.setAll(structureMoaData);\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        style={{\r\n          display: 'flex',\r\n          marginTop: '3px',\r\n          marginLeft: '15px',\r\n          marginRight: '15px',\r\n          justifyContent: 'space-between',\r\n        }}\r\n      >\r\n        <dl style={{ alignItems: 'center' }}>\r\n          <dt style={{ color: '#D3D3D3', fontSize: '1.1rem' }}>TOTAL STRUCTURES</dt>\r\n          <dd\r\n            style={{\r\n              color: '#6ede00',\r\n              fontSize: '1.9rem',\r\n              fontWeight: 'bold',\r\n              fontFamily: 'calibri',\r\n              lineHeight: '1.2',\r\n              margin: 'auto',\r\n            }}\r\n          >\r\n            {thousands_separators(structureNumber[2])}\r\n          </dd>\r\n        </dl>\r\n        <img\r\n          src=\"https://EijiGorilla.github.io/Symbols/House_Logo.svg\"\r\n          alt=\"Structure Logo\"\r\n          height={'17%'}\r\n          width={'17%'}\r\n          style={{ paddingTop: '5px', paddingLeft: '5px' }}\r\n        />\r\n      </div>\r\n\r\n      {/* Structure Chart */}\r\n      <div\r\n        id={chartID}\r\n        style={{\r\n          height: '38vh',\r\n          backgroundColor: 'rgb(0,0,0,0)',\r\n          color: 'white',\r\n          marginBottom: '7%',\r\n        }}\r\n      ></div>\r\n\r\n      {/* Permit-to-Enter */}\r\n      <CalciteLabel>PERMIT-TO-ENTER</CalciteLabel>\r\n      <CalciteLabel layout=\"inline\">\r\n        {structureNumber[1] === 0 ? (\r\n          <b className=\"permitToEnterNumber\">\r\n            {structureNumber[0]}% (0)\r\n            <img\r\n              src=\"https://EijiGorilla.github.io/Symbols/Permit-To-Enter.png\"\r\n              alt=\"Structure Logo\"\r\n              height={'18%'}\r\n              width={'18%'}\r\n              style={{ marginLeft: '70%', display: 'flex', marginTop: '-10%' }}\r\n            />\r\n          </b>\r\n        ) : (\r\n          <b className=\"permitToEnterNumber\">\r\n            {structureNumber[0]}% ({thousands_separators(structureNumber[1])})\r\n            <img\r\n              src=\"https://EijiGorilla.github.io/Symbols/Permit-To-Enter.png\"\r\n              alt=\"Structure Logo\"\r\n              height={'18%'}\r\n              width={'18%'}\r\n              style={{ marginLeft: '70%', display: 'flex', marginTop: '-10%' }}\r\n            />\r\n          </b>\r\n        )}\r\n      </CalciteLabel>\r\n\r\n      <CalciteLabel>MODE OF ACQUISITION</CalciteLabel>\r\n      <div\r\n        id={chartID_moa}\r\n        style={{\r\n          height: '21vh',\r\n          backgroundColor: 'rgb(0,0,0,0)',\r\n          color: 'white',\r\n          marginTop: '-3%',\r\n        }}\r\n      ></div>\r\n    </>\r\n  );\r\n}); // End of lotChartgs\r\n\r\nexport default StructureChart;\r\n"],"names":["maybeDisposeRoot","divId","am5","rootElements","root","dom","id","dispose","memo","_ref","municipal","barangay","pieSeriesRef","useRef","legendRef","chartRef","structureData","setStructureData","useState","category","String","value","Number","sliceSettings","fill","chartID","structureNumber","setStructureNumber","barSeriesRef","yAxisRef","chartRef_moa","structureMoaData","setStructureMoaData","chartID_moa","queryMunicipality","queryMunicipalBarangay","structureLayer","definitionExpression","useEffect","generateStructureData","then","result","generateStrucNumber","response","generateStrucMoaData","_root$_logo","new","container","children","clear","_logo","setThemes","am5themes_Animated","am5themes_Responsive","chart","push","am5percent","layout","verticalLayout","current","pieSeries","series","name","categoryField","valueField","legendValueText","radius","innerRadius","scale","slices","template","setAll","fillOpacity","stroke","strokeWidth","strokeOpacity","templateField","labels","visible","ticks","events","on","ev","_ev$target$dataItem","Category","target","dataItem","dataContext","find","statusStructureQuery","emp","selectedStatus","highlightSelect","query","createQuery","view","when","whenLayerView","layerView","queryFeatures","results","ROW_N","features","length","objID","i","obj","attributes","OBJECTID","queryExt","Query","objectIds","queryExtent","extent","goTo","remove","highlight","filter","FeatureFilter","where","undefined","structureStatusField","data","legend","centerX","x","dataItems","markers","width","height","markerRectangles","cornerRadiusTL","cornerRadiusTR","cornerRadiusBL","cornerRadiusBR","onPrivate","availableSpace","maxWidth","oversizedBehavior","valueLabels","textAlign","itemContainers","paddingTop","paddingBottom","appear","_pieSeriesRef$current","_legendRef$current","_root$_logo2","am5xy","panX","panY","wheelX","wheelY","yRenderer","minGridDistance","inversed","grid","set","yAxis","yAxes","maxDeviation","renderer","get","xAxis","xAxes","min","strictMinMax","calculateTotals","fontSize","valueXField","sequencedInterpolation","categoryYField","columns","draggable","cursorOverStyle","tooltipText","bullets","locationY","sprite","text","interfaceColors","centerY","populateText","_ev$target$dataItem2","statusMoaStructureQuery","structureMoaField","_barSeriesRef$current","_yAxisRef$current","_jsxs","_Fragment","style","display","marginTop","marginLeft","marginRight","justifyContent","alignItems","_jsx","color","fontWeight","fontFamily","lineHeight","margin","thousands_separators","src","alt","paddingLeft","backgroundColor","marginBottom","CalciteLabel","className"],"sourceRoot":""}