"use strict";(self.webpackChunkn2_land=self.webpackChunkn2_land||[]).push([[3583],{43583:(e,t,i)=>{i.r(t),i.d(t,{default:()=>E});var l=i(72791),r=i(36494),a=i(53970),n=i(18661),s=i(21149),o=i(36801),c=i(59181),u=i(66817),d=i(97304),f=i(70565),h=i(56343),g=i(54797),m=i(27663),p=i(82308),v=i(80659),x=i(91934),y=i(44520),b=(i(51174),i(93508),i(85580)),T=i(26877),w=i(72812),S=i(80184);const E=(0,l.memo)((()=>{const{municipalSelected:e,barangaySelected:t}=(0,w.tv)(),i=e.municipality,E=t.name,[R,j]=(0,l.useState)(null),[A,C]=(0,l.useState)(!1);(0,l.useEffect)((()=>{(0,y.bK)(T.Np[1]).then((e=>{j(e[0][0]),C(e[0][1]>=T.fW)}))}),[]);const L=(0,l.useRef)({}),k=(0,l.useRef)({}),U=(0,l.useRef)({}),[_,N]=(0,l.useState)([{category:String,value:Number,sliceSettings:{fill:u.$_("#00c5ff")}}]),Z="structure-chart",[z,B]=(0,l.useState)([]),I=`${T.Hg} = '`+i+"'",Q=I+" AND "+(`${T.TR} = '`+E+"'");return i&&!E?r.UC.definitionExpression=I:E&&(r.UC.definitionExpression=Q),(0,l.useEffect)((()=>{(0,y.KD)(i,E).then((e=>{N(e)})),(0,y.fT)().then((e=>{B(e)}))}),[i,E]),(0,l.useEffect)((()=>{var e,t;t=Z,o.S6(c.i_.rootElements,(function(e){e.dom.id===t&&e.dispose()}));var i=d.f.new(Z);i.container.children.clear(),null===(e=i._logo)||void 0===e||e.dispose(),i.setThemes([v.Z.new(i),x.Z.new(i)]);x.Z.new(i);var l=i.container.children.push(m.u.new(i,{layout:i.verticalLayout}));U.current=l;var y=l.series.push(p.f.new(i,{name:"Series",categoryField:"category",valueField:"value",legendValueText:"{valuePercentTotal.formatNumber('#.')}% ({value})",radius:f.aQ(45),innerRadius:f.aQ(28),scale:1.5}));L.current=y,l.series.push(y);let b=y.children.push(h._.new(i,{text:"[#ffffff]{valueSum}[/]\n[fontSize: 5px; #d3d3d3; verticalAlign: super]STRUCTURES[/]",fontSize:25,centerX:f.aQ(50),centerY:f.aQ(40),populateText:!0,oversizedBehavior:"fit",textAlign:"center"}));y.onPrivate("width",(e=>{b.set("maxWidth",.7*e)})),y.slices.template.setAll({toggleKey:"none",fillOpacity:.9,stroke:u.$_("#ffffff"),strokeWidth:.5,strokeOpacity:1,templateField:"sliceSettings"}),y.labels.template.setAll({visible:!1,scale:0}),y.ticks.template.setAll({visible:!1,scale:0}),y.slices.template.events.on("click",(e=>{var t,i=(null===(t=e.target.dataItem)||void 0===t?void 0:t.dataContext).category;const l=T.D7.find((e=>e.category===i)),o=null===l||void 0===l?void 0:l.value;var c,u=r.UC.createQuery();a.ei.when((function(){a.ei.whenLayerView(r.UC).then((e=>{r.UC.queryFeatures(u).then((function(t){const i=t.features.length;let l=[];for(var o=0;o<i;o++){var u=t.features[o].attributes.OBJECTID;l.push(u)}var d=new s.Z({objectIds:l});r.UC.queryExtent(d).then((function(e){e.extent&&a.ei.goTo(e.extent)})),c&&c.remove(),c=e.highlight(l),a.ei.on("click",(function(){e.filter=new n.Z({where:void 0}),c.remove()}))})),e.filter=new n.Z({where:T.Us+" = "+o})}))}))})),y.data.setAll(_);var w=l.children.push(g.D.new(i,{centerX:f.aQ(50),x:f.aQ(50)}));k.current=w,w.data.setAll(y.dataItems),w.markers.template.setAll({width:18,height:18}),w.markerRectangles.template.setAll({cornerRadiusTL:10,cornerRadiusTR:10,cornerRadiusBL:10,cornerRadiusBR:10});return l.onPrivate("width",(function(e){var t=220*1.1;w.labels.template.setAll({width:t,maxWidth:t})})),w.labels.template.setAll({oversizedBehavior:"truncate",fill:u.$_("#ffffff")}),w.valueLabels.template.setAll({textAlign:"right",fill:u.$_("#ffffff")}),w.itemContainers.template.setAll({paddingTop:3,paddingBottom:1}),y.appear(1e3,100),()=>{i.dispose()}}),[Z,_]),(0,l.useEffect)((()=>{var e,t;null===(e=L.current)||void 0===e||e.data.setAll(_),null===(t=k.current)||void 0===t||t.data.setAll(L.current.dataItems)})),(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{style:{display:"flex",marginTop:"3px",marginLeft:"15px",marginRight:"15px",justifyContent:"space-between"},children:[(0,S.jsxs)("dl",{style:{alignItems:"center"},children:[(0,S.jsx)("dt",{style:{color:T.X7,fontSize:"1.1rem"},children:"TOTAL STRUCTURES"}),(0,S.jsx)("dd",{style:{color:T.u8,fontSize:"1.9rem",fontWeight:"bold",fontFamily:"calibri",lineHeight:"1.2",margin:"auto"},children:(0,y.oc)(z[2])})]}),(0,S.jsx)("img",{src:"https://EijiGorilla.github.io/Symbols/House_Logo.svg",alt:"Structure Logo",height:"17%",width:"17%",style:{paddingTop:"5px",paddingLeft:"5px"}})]}),(0,S.jsx)("div",{style:{color:!0===A?"red":"gray",fontSize:"0.8rem",float:"right",marginRight:"5px"},children:R?"As of "+R:""}),(0,S.jsx)("div",{id:Z,style:{height:"62vh",backgroundColor:"rgb(0,0,0,0)",color:"white",marginBottom:"7%"}}),(0,S.jsx)(b.ZK,{children:"PERMIT-TO-ENTER"}),(0,S.jsx)(b.ZK,{layout:"inline",children:0===z[1]?(0,S.jsxs)("b",{className:"permitToEnterNumber",style:{color:T.u8},children:[z[0],"% (0)",(0,S.jsx)("img",{src:"https://EijiGorilla.github.io/Symbols/Permit-To-Enter.png",alt:"Structure Logo",height:"15%",width:"15%",style:{marginLeft:"280px",display:"flex",marginTop:"-10%"}})]}):(0,S.jsxs)("b",{className:"permitToEnterNumber",style:{color:T.u8},children:[z[0],"% (",(0,y.oc)(z[1]),")",(0,S.jsx)("img",{src:"https://EijiGorilla.github.io/Symbols/Permit-To-Enter.png",alt:"Structure Logo",height:"15%",width:"15%",style:{marginLeft:"280px",display:"flex",marginTop:"-10%"}})]})})]})}))}}]);
//# sourceMappingURL=3583.4d39eb3b.chunk.js.map