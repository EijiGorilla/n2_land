"use strict";(self.webpackChunkn2_land=self.webpackChunkn2_land||[]).push([[1837],{11837:(n,t,e)=>{e.d(t,{convertMeshVertexSpace:()=>u});var r=e(10064),o=e(84652),l=e(66978),i=e(27474),a=e(66149);async function u(n,t,e){await Promise.resolve(),(0,l.k_)(e);const u=(0,a.qk)(n,t);if(!u)throw new r.Z("meshUtils:convertVertexSpace()","Failed to convert to provided vertex space due to projection errors");const s=n.cloneAndModifyVertexAttributes(new i.Q({...u,uv:(0,o.d9)(n.vertexAttributes.uv),color:(0,o.d9)(n.vertexAttributes.color)}),t);return s.transform=null,s}},66149:(n,t,e)=>{e.d(t,{qk:()=>h,ur:()=>U,x1:()=>x});var r=e(32718),o=e(16889),l=e(68860),i=e(29303),a=e(21389),u=e(29134),s=e(7025),c=e(32035),f=e(12400),p=e(29691),g=e(37998),v=e(68859),A=e(69048),m=e(11186),S=e(11700);const w=()=>r.Z.getLogger("esri.geometry.support.meshUtils.vertexSpaceConversion");function x(n,t,e){let{vertexSpace:r,spatialReference:o}=e;if("georeferenced"===r.type){const e=n;if(!(0,v.K)(t,e,o))return!1;const{origin:l}=r;return(0,c.f)(n,e,l),!0}const l=(0,p.rS)(o),i=n;if(!(0,v.K)(t,i,l))return!1;const{origin:a}=r,s=k;if(!(0,g.B)(o,a,s,l))return!1;const f=(0,u.U_)(k,s);return null!=f&&((0,c.h)(n,i,f),!0)}function h(n,t,e){const{vertexSpace:r,transform:l,vertexAttributes:a}=n,f=d(n.spatialReference,e,O.SOURCE|O.TARGET);if((0,A.vI)(r,t)&&(!l||(0,u.I6)(l.localMatrix,s.Wd))&&(0,o.Po)(f,1)){const{position:n,normal:t,tangent:r}=a,o=e?.allowBufferReuse;return{position:o?n:n.slice(),normal:o?t:t?.slice(),tangent:o?r:r?.slice()}}switch(n.vertexSpace.type){case"local":return"local"===t.type?function(n,t,e,r){let{vertexAttributes:o,spatialReference:l,transform:i}=n,{origin:a}=t;const s=(0,p.rS)(l);if(!(0,g.B)(l,a,b,s))return(0,S.pn)(w(),l,s),null;if(i&&(0,u.Jp)(b,b,i.localMatrix),!(0,g.B)(l,e,E,s))return(0,S.pn)(w(),s,l),null;(0,u.U_)(E,E);const c=(0,u.Jp)(b,E,b);return R(c,l,r,O.SOURCE|O.TARGET),y(o,c)}(n,n.vertexSpace,t.origin,e):function(n,t,e,r){let{spatialReference:o,vertexAttributes:l,transform:i}=n,{origin:a}=t;const s=(0,p.rS)(o);if(!(0,g.B)(o,a,b,s))return(0,S.pn)(w(),o,s),null;i&&(0,u.Jp)(b,b,i.localMatrix),R(b,o,r,O.SOURCE);const f=new Float64Array(l.position.length),v=function(n,t,e,r){(0,m.a)(r,n,t);const o=new Float64Array(n.length);return(0,S.To)(r,o,e)?o:((0,S.pn)(w(),(0,p.rS)(e),e),null)}(l.position,b,o,f);if(!v)return null;const A=function(n,t,e,r,o){if(null==e)return null;const l=new Float32Array(e.length);return(0,S.w9)(e,l,r),(0,S.Yk)(l,n,t,o,l)?l:((0,S.pn)(w(),(0,p.rS)(o),o),null)}(v,f,l.normal,b,o);if(l.normal&&!A)return null;const x=function(n,t,e,r,o){if(null==e)return null;const l=new Float32Array(e.length);return(0,S.VS)(e,l,r),(0,S.M2)(l,n,t,o,l)?l:((0,S.pn)(w(),(0,p.rS)(o),o),null)}(v,f,l.tangent,b,o);if(l.tangent&&!x)return null;if(e){const n=(0,c.k)(T,e);(0,m.b)(v,v,n)}return{position:v,normal:A,tangent:x}}(n,n.vertexSpace,t.origin,e);case"georeferenced":return"local"===t.type?function(n,t,e,r){let{vertexAttributes:o,spatialReference:l,transform:a}=n,{origin:s}=t;const c=(0,p.rS)(l);if(!(0,g.B)(l,e,b,c))return(0,S.pn)(w(),l,c),null;const f=1/d(l,r,O.TARGET);(0,u.bA)(b,b,[f,f,f]);const v=(0,u.U_)(E,b),{position:A,normal:x,tangent:h}=function(n,t,e){if(!t)return n;if(!e){const{position:e,normal:r,tangent:o}=n;return{position:(0,m.b)(new Float64Array(e.length),e,t),tangent:o,normal:r}}const r=y(n,e.localMatrix);return(0,m.b)(r.position,r.position,t),r}(o,s,a),R=new Float64Array(A.length),U=function(n,t,e,r){const o=(0,S.XO)(n,t,r);if(!o)return(0,S.pn)(w(),t,(0,p.rS)(t)),null;const l=new Float64Array(o.length);return(0,m.a)(l,o,e),l}(A,l,v,R);if(!U)return null;const T=(0,i.XL)(F,v),k=function(n,t,e,r,o,l){if(null==n)return null;const i=l??new Float32Array(n.length);return(0,S.Iz)(n,t,e,r,i)?((0,m.t)(i,i,o),i):((0,S.pn)(w(),r,(0,p.rS)(r)),null)}(x,A,R,l,T,x!==o.normal?x:void 0);if(!k&&x)return null;const C=function(n,t,e,r,o,l){if(null==n)return null;const i=l??new Float32Array(n.length);return(0,S.wi)(n,t,e,r,i)?((0,m.t)(i,i,o,4),i):((0,S.pn)(w(),r,(0,p.rS)(r)),null)}(h,A,R,l,T,h!==o.tangent?h:void 0);return!C&&h?null:{position:U,normal:k,tangent:C}}(n,n.vertexSpace,t.origin,e):function(n,t,e,r){let{vertexAttributes:o,transform:l,spatialReference:i}=n,{origin:a}=t;const{position:u,normal:s,tangent:f}=l?y(o,l.localMatrix):o,p=new Float64Array(u.length);let g=u;if(a&&(g=(0,m.b)(p,g,a)),e){const n=(0,c.k)(T,e);g=(0,m.b)(p,g,n)}d(i,r,O.NONE);const v=r?.allowBufferReuse;return{position:g!==o.position||v?g:g.slice(),normal:s!==o.normal||v?s:s?.slice(),tangent:f!==o.tangent||v?f:f?.slice()}}(n,n.vertexSpace,t.origin,e)}}function y(n,t){const e=new Float64Array(n.position.length);(0,m.a)(e,n.position,t);const r=n.normal?new Float32Array(n.normal.length):null,o=n.tangent?new Float32Array(n.tangent.length):null;return r&&n.normal&&(0,S.w9)(n.normal,r,t),o&&n.tangent&&(0,S.VS)(n.tangent,o,t),{position:e,normal:r,tangent:o}}function R(n,t,e,r){const o=d(t,e,r);1!==o&&(0,u.bA)(n,n,[o,o,o])}function d(n,t,e){const r=!!(e&O.SOURCE),o=!!(e&O.TARGET),l=t?.sourceUnit,i=t?.targetUnit;if(!l&&!i)return 1;let a=U(l,n);!r&&l&&1!==a&&(w().warn("source unit conversion not supported"),a=1);let u=1/U(i,n);return!o&&i&&1!==u&&(w().warn("target unit conversion not supported"),u=1),a*u}function U(n,t){if(null==n)return 1;const e=(0,l.r6)(t);return 1/(0,l.En)(e,"meters",n)}const b=(0,s.Ue)(),E=(0,s.Ue)(),F=(0,a.Ue)(),T=(0,f.Ue)(),k=(0,s.Ue)();var O,C;(C=O||(O={}))[C.NONE=0]="NONE",C[C.SOURCE=1]="SOURCE",C[C.TARGET=2]="TARGET"}}]);
//# sourceMappingURL=1837.e70cf063.chunk.js.map